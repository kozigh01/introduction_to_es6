<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Async / Await</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>

  <script type="module">

    const apiUrl = 'https://fcctop100.herokuapp.com/api/fccusers/top/alltime'

    // previous callback way
    // function getTop100Campers() {
    //   fetch(apiUrl)
    //     .then(resp => resp.json() )
    //     .then(json => {
    //       console.log(json[0]);
    //     })
    //     .catch(err => {
    //       console.log(err);
    //     });
    // }
    // getTop100Campers();

    // async-await way
    async function getTop100CampersAsync() {
      try {
        const response = await fetch(apiUrl);
        const json = await response.json();
        console.log(json[0]);
      } catch(err) {
        console.log('There was an error', err);
      }
    }
    getTop100CampersAsync();


    // course challenge
    function resolveAfter3Seconds() {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          resolve('resolved!');
        }, 3000);
      })
    }

    // promise way
    resolveAfter3Seconds()
      .then((data) => {
        console.log(data);
      });
      
    // async-await way
    async function asyncWay() {
      let data = await resolveAfter3Seconds();
      console.log(data);
    }
    asyncWay();

  </script>
</body>

</html>